---
import GitHub from "@/icons/Github.astro";
import LinkButton from "./LinkButton.astro";
import Link from "@/icons/Link.astro";
import ReadMore from "@/components/projects/ReadMore";
import { TAGS } from "./TagList.astro";

// Traducci√≥n
import { t } from "i18next";

// Datos de los proyectos
const PROJECTS = [
  {
    title: "Spring Boot 3 Microservices with Maven",
    description:
      t("projects.item_3_description_1.description") +
      " " +
      t("projects.item_3_description_1.microservices"),
    link: "https://spring.io/batch",
    github: "https://github.com/Nib1sin/S3_maven_microservices",
    image: "/images/MICROSERVICES_SPRING3.webp",
    tags: [TAGS.JAVA, TAGS.MAVEN, TAGS.SPRING, TAGS.YAML],
  },
  {
    title: "Spring Batch processing on the JVM",
    description: t("projects.item_1_description_1"),
    link: "https://spring.io/batch",
    github: "https://github.com/Nib1sin/ETL_Spring_1_J8",
    image: "/images/SPRING_BATCH.webp",
    tags: [
      TAGS.JAVA,
      TAGS.GRADLE,
      TAGS.ORACLE,
      TAGS.SQL,
      TAGS.GROOVY,
      TAGS.SPRING,
      TAGS.XML,
    ],
  },
  {
    title: "ChatPDF - Chat with your pdf file",
    description: t("projects.item_2_description_1"),
    link: "https://askyourpdf.com/",
    github: "https://github.com/Nib1sin/ChatPDF",
    image: "/images/CHAT_PDF.webp",
    tags: [
      TAGS.TYPESCRIPT,
      TAGS.SVELTE,
      TAGS.JAVASCRIPT,
      TAGS.OPENAI,
      TAGS._Astr,
      TAGS.TAILWIND,
    ],
  },
];
---

<div id="indicators-carousel" class="relative w-full" data-carousel="static">
  <!-- Carousel wrapper -->
  <div class="relative h-56 overflow-hidden rounded-lg md:h-96">
    {
      PROJECTS.map(
        ({ image, title, description, tags, link, github }, index) => (
          <div
            class={`${
              index === 0 ? "block" : "hidden"
            } duration-700 ease-in-out`}
            data-carousel-item={index === 0 ? "active" : ""}
          >
            <img
              src={image}
              alt={title}
              class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"
            />
            <div class="absolute bottom-0 left-0 right-0 p-4 bg-black/50 text-white">
              <h3 class="text-lg font-bold">{title}</h3>
              <p class="text-sm">{description}</p>
              <div class="flex gap-2 mt-2">
                {tags.map((tag) => (
                  <span
                    class={`px-2 py-1 text-xs rounded-full ${tag.class} border border-gray-700 dark:border-gray-500`}
                  >
                    {tag.name}
                  </span>
                ))}
              </div>
              <div class="flex gap-4 mt-4">
                {github && (
                  <LinkButton href={github}>
                    <GitHub class="size-6" />
                    Code
                  </LinkButton>
                )}
                {link && (
                  <LinkButton href={link}>
                    <Link class="size-4" />
                    Preview
                  </LinkButton>
                )}
              </div>
            </div>
          </div>
        )
      )
    }
  </div>

  <!-- Slider indicators -->
  <div
    class="absolute z-30 flex -translate-x-1/2 space-x-3 rtl:space-x-reverse bottom-5 left-1/2"
  >
    {
      PROJECTS.map((_, index) => (
        <button
          type="button"
          class="w-3 h-3 rounded-full"
          aria-current={index === 0 ? "true" : "false"}
          aria-label={`Slide ${index + 1}`}
          data-carousel-slide-to={index}
        />
      ))
    }
  </div>

  <!-- Slider controls -->
  <button
    type="button"
    class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
    data-carousel-prev
  >
    <span
      class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none"
    >
      <svg
        class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 6 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M5 1 1 5l4 4"></path>
      </svg>
      <span class="sr-only">Previous</span>
    </span>
  </button>
  <button
    type="button"
    class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
    data-carousel-next
  >
    <span
      class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none"
    >
      <svg
        class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 6 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m1 9 4-4-4-4"></path>
      </svg>
      <span class="sr-only">Next</span>
    </span>
  </button>
</div>
